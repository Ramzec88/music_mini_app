<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµ –ó–∞–∫–∞–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Å–µ–Ω</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Floating musical notes -->
    <div class="floating-notes" id="floatingNotes"></div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">üéµ</div>
            <h1>–°–æ–∑–¥–∞–µ–º –≤–∞—à—É —É–Ω–∏–∫–∞–ª—å–Ω—É—é –ø–µ—Å–Ω—é</h1>
            <p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –æ—Å–æ–±—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤</p>
        </div>

        <!-- Features -->
        <div class="features">
            <div class="feature-card">
                <span class="feature-icon">üé§</span>
                <div class="feature-title">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã</div>
                <div class="feature-description">–ö–∞–∂–¥–∞—è –ø–µ—Å–Ω—è —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å —Å —É—á–µ—Ç–æ–º –≤–∞—à–∏—Ö –ø–æ–∂–µ–ª–∞–Ω–∏–π</div>
            </div>
            <div class="feature-card">
                <span class="feature-icon">üéº</span>
                <div class="feature-title">–õ—é–±–æ–π –∂–∞–Ω—Ä</div>
                <div class="feature-description">–û—Ç —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–ª–ª–∞–¥ –¥–æ —ç–Ω–µ—Ä–≥–∏—á–Ω–æ–≥–æ —Ä—ç–ø–∞ - –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å—Ç–∏–ª—å</div>
            </div>
            <div class="feature-card">
                <span class="feature-icon">‚ö°</span>
                <div class="feature-title">–ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ</div>
                <div class="feature-description">–ü–æ–ª—É—á–∏—Ç–µ –≥–æ—Ç–æ–≤—É—é –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–Ω–µ–π</div>
            </div>
        </div>

        <!-- Main Application -->
        <div class="main-card">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 25%"></div>
            </div>

            <!-- Step 1: Promo Code -->
            <div class="step active" id="step1">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <h2 class="step-title">–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥</h2>
                    <p class="step-description">–£ –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –∑–∞–∫–∞–∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –ø–µ—Å–Ω–∏? –í–≤–µ–¥–∏—Ç–µ –µ–≥–æ –Ω–∏–∂–µ</p>
                </div>

                <form id="promoForm">
                    <div class="form-group">
                        <label class="form-label">üéüÔ∏è –ü—Ä–æ–º–æ–∫–æ–¥</label>
                        <div class="promo-input-container">
                            <input 
                                type="text" 
                                class="form-input promo-input" 
                                id="promoCode" 
                                placeholder="MUSIC2024"
                                maxlength="20"
                                required
                            >
                            <span class="promo-icon">üîë</span>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button type="submit" class="btn btn-primary" id="promoSubmitBtn">
                            –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
                        </button>
                    </div>
                </form>
            </div>

            <!-- Step 2: Song Request -->
            <div class="step" id="step2">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <h2 class="step-title">–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–π –ø–µ—Å–Ω–µ</h2>
                    <p class="step-description">–ß–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤—ã –æ–ø–∏—à–µ—Ç–µ, —Ç–µ–º –ª—É—á—à–µ –±—É–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç</p>
                </div>

                <form id="songRequestForm">
                    <div class="form-group">
                        <label class="form-label">üë§ –î–ª—è –∫–æ–≥–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ø–µ—Å–Ω—è?</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="songRecipient" 
                            placeholder="–î–ª—è –∂–µ–Ω—ã, —Å—ã–Ω–∞, –∫–æ–ª–ª–µ–≥ –ø–æ —Ä–∞–±–æ—Ç–µ..."
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label">üé≠ –ö–∞–∫–æ–π –∂–∞–Ω—Ä/—Å—Ç–∏–ª—å –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ?</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="songGenre" 
                            placeholder="–ü–æ–ø, —Ä–æ–∫, —Ä—ç–ø, –±–∞–ª–ª–∞–¥–∞, –Ω–∞—Ä–æ–¥–Ω–∞—è..."
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label">üìù –û —á–µ–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–µ—Å–Ω—è?</label>
                        <textarea 
                            class="form-textarea" 
                            id="songTheme" 
                            placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é, –ø–æ–≤–æ–¥, —ç–º–æ—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å..."
                            required
                        ></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‚ú® –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <textarea 
                            class="form-textarea" 
                            id="songWishes" 
                            placeholder="–£–ø–æ–º—è–Ω—É—Ç—å –∏–º–µ–Ω–∞, –¥–∞—Ç—ã, –º–µ—Å—Ç–∞, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ—Ä–∞–∑—ã..."
                            style="min-height: 100px;"
                        ></textarea>
                    </div>

                    <div class="btn-group">
                        <button type="button" class="btn btn-secondary" onclick="goToStep(1)">
                            ‚Üê –ù–∞–∑–∞–¥
                        </button>
                        <button type="submit" class="btn btn-primary" id="songSubmitBtn">
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑
                        </button>
                    </div>
                </form>
            </div>

            <!-- Step 3: Order Summary -->
            <div class="step" id="step3">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <h2 class="step-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
                    <p class="step-description">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞</p>
                </div>

                <div class="order-summary">
                    <h3>üìã –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h3>
                    <div class="order-detail">
                        <strong>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</strong> <span id="orderNumber"></span>
                    </div>
                    <div class="order-detail">
                        <strong>–ü—Ä–æ–º–æ–∫–æ–¥:</strong> <span id="summaryPromo"></span>
                    </div>
                    <div class="order-detail">
                        <strong>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</strong> <span id="summaryRecipient"></span>
                    </div>
                    <div class="order-detail">
                        <strong>–ñ–∞–Ω—Ä:</strong> <span id="summaryGenre"></span>
                    </div>
                    <div class="order-detail">
                        <strong>–¢–µ–º–∞:</strong> <span id="summaryTheme"></span>
                    </div>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn btn-secondary" onclick="goToStep(2)">
                        ‚Üê –ò–∑–º–µ–Ω–∏—Ç—å
                    </button>
                    <button type="button" class="btn btn-success" onclick="confirmOrder()">
                        ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑
                    </button>
                </div>
            </div>

            <!-- Step 4: Success -->
            <div class="step" id="step4">
                <div class="success-animation">
                    <div class="success-icon">üéâ</div>
                    <h2 class="step-title">–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!</h2>
                    <p class="step-description">
                        –í–∞—à –∑–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏, –∫–æ–≥–¥–∞ –ø–µ—Å–Ω—è –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        let GOOGLE_SHEETS_CONFIG = {
            API_KEY: '',
            SPREADSHEET_ID: '',
            SHEETS: { PROMO_CODES: 'PromoCodes', ORDERS: 'Orders', USERS: 'Users' }
        };

        async function fetchEnvConfig() {
            const res = await fetch('/api/env');
            return await res.json();
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const env = await fetchEnvConfig();
            GOOGLE_SHEETS_CONFIG.API_KEY = env.GOOGLE_SHEETS_API_KEY;
            GOOGLE_SHEETS_CONFIG.SPREADSHEET_ID = env.GOOGLE_SPREADSHEET_ID;

            if (!GOOGLE_SHEETS_CONFIG.API_KEY || !GOOGLE_SHEETS_CONFIG.SPREADSHEET_ID) {
                showNotification('‚ùå –û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ö–ª—é—á–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'error');
                return;
            }

            setupFloatingNotes();
            setupEventListeners();
            updateProgress();
            testGoogleSheetsConnection();
        });

        function setupFloatingNotes() { /* —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ */ }
        function setupEventListeners() { /* —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ */ }
        function updateProgress() { /* —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ */ }
        function testGoogleSheetsConnection() { /* —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ */ }
        function confirmOrder() { /* —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ */ }
        function showNotification(msg, type) { /* —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ */ }
    </script>
</body>
</html>
